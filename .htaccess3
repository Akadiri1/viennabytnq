Options +FollowSymLinks
RewriteEngine On

# Preserve HTTP Authorization header
RewriteCond %{HTTP:Authorization} ^(.*)
RewriteRule .* - [E=HTTP_AUTHORIZATION:%1]

# If file or folder exists in viennabyTNQ/www, serve it directly
RewriteCond %{DOCUMENT_ROOT}/viennabyTNQ/www/%{REQUEST_URI} -f [OR]
RewriteCond %{DOCUMENT_ROOT}/viennabyTNQ/www/%{REQUEST_URI} -d
RewriteRule ^ viennabyTNQ/www/%{REQUEST_URI} [L]

# Otherwise, route everything to viennabyTNQ/www/index.php
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^ viennabyTNQ/www/index.php [L]

# Protect sensitive files
<FilesMatch "\.(env|ini|log|sh|bak|sql|json)$">
    Order Allow,Deny
    Deny from all
</FilesMatch>
